---
import { GISCUS_CONFIG } from '../utils/constants';

const isConfigured = GISCUS_CONFIG.repoId && GISCUS_CONFIG.categoryId;
---

<div class="comments-section">
  <h3 class="text-lg font-semibold mb-6">è¯„è®º</h3>

  {isConfigured ? (
    <script
      src="https://giscus.app/client.js"
      data-repo={GISCUS_CONFIG.repo}
      data-repo-id={GISCUS_CONFIG.repoId}
      data-category={GISCUS_CONFIG.category}
      data-category-id={GISCUS_CONFIG.categoryId}
      data-mapping={GISCUS_CONFIG.mapping}
      data-strict="0"
      data-reactions-enabled={GISCUS_CONFIG.reactionsEnabled}
      data-emit-metadata={GISCUS_CONFIG.emitMetadata}
      data-input-position={GISCUS_CONFIG.inputPosition}
      data-theme="preferred_color_scheme"
      data-lang={GISCUS_CONFIG.lang}
      data-loading="lazy"
      crossorigin="anonymous"
      async
    ></script>
  ) : (
    <div class="p-4 bg-[var(--bg-secondary)] rounded-lg border border-[var(--border-color)]">
      <p class="text-sm text-[var(--text-secondary)]">
        ğŸ’¡ è¯„è®ºåŠŸèƒ½å°šæœªé…ç½®ã€‚è¯·è®¿é—®
        <a
          href="https://giscus.app"
          target="_blank"
          rel="noopener noreferrer"
          class="underline hover:text-[var(--text-primary)]"
        >
          giscus.app
        </a>
        å®Œæˆé…ç½®ï¼š
      </p>
      <ol class="mt-2 text-sm text-[var(--text-muted)] list-decimal list-inside space-y-1">
        <li>ç¡®ä¿ä»“åº“å·²å¯ç”¨ Discussions åŠŸèƒ½</li>
        <li>åœ¨ giscus.app è¾“å…¥ä»“åº“ä¿¡æ¯è·å–é…ç½® ID</li>
        <li>å°† repoId å’Œ categoryId å¡«å…¥ src/utils/constants.ts</li>
      </ol>
    </div>
  )}
</div>

<noscript>
  <p class="text-[var(--text-muted)] text-sm mt-4">
    è¯·å¯ç”¨ JavaScript ä»¥æŸ¥çœ‹è¯„è®ºã€‚
  </p>
</noscript>

---
const navItems = [
  { href: '/', label: '首页' },
  { href: '/blog', label: '博客' },
  { href: '/projects', label: '项目' },
  { href: '/videos', label: '视频' },
  { href: '/about', label: '关于' },
];
---

<!-- Mobile Menu Overlay with backdrop blur -->
<div
  id="menu-overlay"
  class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[999] opacity-0 pointer-events-none transition-opacity duration-300"
  onclick="window.closeMobileMenu()"
>
</div>

<!-- Mobile Menu Panel - Slides from left -->
<aside
  id="mobile-menu-panel"
  class="fixed top-0 left-0 w-[300px] h-screen z-[1000] transform -translate-x-full transition-transform duration-300 ease-out"
  style="background: rgba(10, 10, 10, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);"
>
  <div class="flex flex-col h-full">
    <!-- Close button -->
    <div class="flex justify-start p-5">
      <button
        type="button"
        onclick="window.closeMobileMenu()"
        class="p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors"
        aria-label="关闭菜单"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>

    <!-- Navigation Links -->
    <nav class="flex-1 px-6">
      <ul class="space-y-2">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="block py-3 text-lg font-medium text-white/70 hover:text-white transition-colors"
              onclick="window.closeMobileMenu()"
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>

    </nav>

    <!-- Footer -->
    <div class="p-6 border-t border-white/10">
      <p class="text-sm text-white/40 text-center">
        © 2026 RollingTheRock
      </p>
    </div>
  </div>
</aside>

<script is:inline>
  // Global functions for menu control
  window.openMobileMenu = function() {
    const panel = document.getElementById('mobile-menu-panel');
    const overlay = document.getElementById('menu-overlay');

    if (panel && overlay) {
      panel.classList.remove('-translate-x-full');
      overlay.classList.remove('opacity-0', 'pointer-events-none');
      document.body.style.overflow = 'hidden';
    }
  };

  window.closeMobileMenu = function() {
    const panel = document.getElementById('mobile-menu-panel');
    const overlay = document.getElementById('menu-overlay');

    if (panel && overlay) {
      panel.classList.add('-translate-x-full');
      overlay.classList.add('opacity-0', 'pointer-events-none');
      document.body.style.overflow = '';
    }
  };

  // Close on ESC key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      window.closeMobileMenu();
    }
  });
</script>

---
import ImagePlaceholder from './ImagePlaceholder.astro';

interface Props {
  title: string;
  description: string;
  slug: string;
  image?: string;
  tech: string[];
  github?: string;
  demo?: string;
}

const { title, description, slug, image, tech, github, demo } = Astro.props;
---

<article class="group card-hover bg-[var(--bg-secondary)] rounded-xl overflow-hidden h-full flex flex-col">
  <a href={`/projects/${slug}`} class="block flex-1 flex flex-col">
    <div class="aspect-video overflow-hidden">
      {image ? (
        <img
          src={image}
          alt={title}
          class="w-full h-full object-cover grayscale hover-image transition-all duration-300"
        />
      ) : (
        <ImagePlaceholder alt={title} aspectRatio="16/9" class="w-full h-full" />
      )}
    </div>

    <div class="p-5 flex-1 flex flex-col">
      <h3 class="text-lg font-semibold mb-2 group-hover:text-[#06B6D4] transition-colors">
        <span class="text-[#06B6D4] mr-1.5 text-[0.6em] align-middle">●</span>{title}
      </h3>
      <p class="text-sm text-[var(--text-secondary)] mb-4 line-clamp-2 flex-1">
        {description}
      </p>

      <div class="text-xs text-[var(--text-secondary)]">
        {tech.slice(0, 5).map((t, i) => (
          <span>
            {i > 0 && <span class="mx-1">·</span>}
            {t}
          </span>
        ))}
      </div>
    </div>
  </a>

  {(github || demo) && (
    <div class="px-5 pb-5 flex gap-3">
      {github && (
        <a
          href={github}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-1 text-sm text-[var(--text-secondary)] hover:text-[#06B6D4] transition-colors"
          onclick="event.stopPropagation()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
          </svg>
          GitHub
        </a>
      )}
      {demo && (
        <a
          href={demo}
          target="_blank"
          rel="noopener noreferrer"
          class="inline-flex items-center gap-1 text-sm text-[var(--text-secondary)] hover:text-[#06B6D4] transition-colors"
          onclick="event.stopPropagation()"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
          Demo
        </a>
      )}
    </div>
  )}
</article>

<style>
  .hover-image {
    filter: grayscale(100%);
    transition: filter 0.3s ease, transform 0.3s ease;
  }
  .group:hover .hover-image {
    filter: grayscale(0%);
    transform: scale(1.05);
  }
</style>
